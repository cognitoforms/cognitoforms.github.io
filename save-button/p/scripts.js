var code = window.innerWidth + 'X' + window.innerHeight;

document.body.addEventListener('click', function(e){
  code = code + 'C' + e.x + 'X' + e.y;
  alert('Thank you. Your code is: ' + code + 'T' + Math.round(e.timeStamp));
  code = code + '-';
});

document.getElementById('save').addEventListener('click', function(e){
  e.stopPropagation();
  
  code = code + 'CST' + Math.round(e.timeStamp);
  alert('Thank you. Your code is: ' + code);
  code = code + '-';
});

const rawData = [
  "1366X649CST8552", 
"1920X937CST3871", 
"1366X625CST11968", 
"1280X881CST4698", 
"1440X708C705X303T147794", 
"1344X698C1290X26-C1303X87T24011", 
"1359X643C460X197-C184X153-C627X279-C454X196T37146", 
"1242X597C120X286T15116", 
"1229X577CST23116", 
"1313X576C519X223T11126", 
"1280X881C1167X144T3258", 
"1366X625CST4716", 
"1366X657C485X345T4444", 
"1440X727CST9893", 
"1366X625CST3302", 
"1600X789CST29452", 
"1366X695C483X341T9420", 
"1920X969C969X360T37975", 
"1087X764CST27035", 
"1386X798C491X81T11628", 
"1366X657CST22337", 
"1536X714C243X361T2869", 
"1366X625C482X237T3696", 
"980x1768cs953x94t30830", 
"980X1740CST42399-CST67936", 
"1366X657C321X87T19819", 
"1920X973C484X220T4189", 
"798X736C47X328T16592", 
"1440X775CST7015", 
"1920X969C510X80T17825", 
"1366X625CST16366", 
"1280X913C744X135T2631", 
"1440X781CST8190", 
"1366X598CST76312", 
"980X1743CST7415", 
"1401X934CST11558", 
"1366X649CST4403", 
"1440X825C578X317T2189", 
"1280X569C532X187-CST41559", 
"1366X657C548X221T12770", 
"1536X746CST14132", 
"1280X881CST8172", 
"1366X695CST9411", 
"980X1472C151X340T24748", 
"1280X881C483X81-C224X251-CST41205-CST51043", 
"1920X969C1169X299-CST22279", 
"1496X707C380X93-C518X78-C610X84-C366X86T23972", 
"1366X625CST3783", 
"1366X617CST6932", 
"1280X881C364X143T2738", 
"1366X657C503X40-C309X48-C1325X49-C676X142-CST229141", 
"980x1700cst23611", 
"1536X760CST6488", 
"1264X556C655X218T3302", 
"1339X779C1294X53T29815", 
"1920X904C980X326-CST22676", 
"1951X892CST33688", 
"1920X937C821X228T20278", 
"1280X577C557X322T12273", 
"1536X714C568X342T2025", 
"1440X795C531X306T18488", 
"1280X881C770X314T16780", 
"1360X625CST5749", 
"1536X722C608X225T6501", 
"1440X781CST10541", 
"1440X708CST18317", 
"1536X746CST3762", 
"1366X657CST6957-CST29677", 
"1366X643C525X216T25665", 
"1536X722CST14884", 
"1366X625C297X170T28946", 
"980X1707C302X341T10742", 
"1680X965CST7029", 
"1920X937C761X342T4995", 
"980X1849CST56341-CST75434", 
"1366X657C577X237T2509", 
"1920X880CST5775", 
"1229X604CST41889", 
"1366X657CST31308", 
"1366X625CST33562", 
"1495X723CST16273", 
"1205X585CST34081", 
"1920X975C1568X348T14932", 
"1920X937CST8718", 
"1920X947C447X312T5390", 
"1440X449CST5033", 
"1024X625C684X504T7078", 
"819X444C444X272T2204", 
"1280X881C849X250T1742", 
"1536X714CST6795", 
"1092X474C690X293T10911", 
"2560X937CST3642", 
"1366X657C517X240T13003", 
"1366X625CST21940", 
"876X733CST10375", 
"1366X695C624X277T4010", 
"1366X625C708X97T1486", 
"1920X937CST5742", 
"980x1809cst61814", 
"1600X757C787X167T1972", 
"1366X625CST4189", 
"1149X925CST4698", 
"1536X696CST6361", 
"980X1690CST4436-CST6565", 
"980X1721C554X224T6970", 
"1366X649C883X96-CST32251-C603X289-C1197X641T52367", 
"1440X757C670X222T3888", 
"1264X604C1066X327-C779X146T10149", 
"1536X754CST5865", 
"1536X722CST37929", 
"1920X929C808X218T6025", 
"1366X625C506X183-C515X176-C575X180T14708", 
"1867X1074C949X365T1946", 
"1366X625C587X334-C1092X606T10231", 
"980X1797C580X217T10895", 
"980X1667CST12269", 
"1396X649CST4741", 
"1280X609C967X481T7968", 
"1366X657CST10627", 
"1300X580CST3692", 
"1536X718CST4774", 
"1920X937C846X226T4461", 
"1420X763CST5309", 
"1366X657C530X223T4891", 
"1366X657C536X226T12573", 
"1024X625C496X171T2960", 
"1364X625C501X228T9760", 
"1920X937CST4990", 
"1397X948C618X226-C606X264T10692", 
"1440X757C800X107T2553", 
"1458X875C526X348T12146", 
"1280X657C706X298T6776", 
"1536X722C860X332T4362", 
"1366X625C759X143T1653", 
"1366X657CST4590", 
"1366X657C802X306T4829", 
"1280X881C630X167T2286",
"1600X757C585X245T1485", 
"1536X754C493X81T21850", 
"1364X625C584X478T37952", 
"1364X625C191X216T17692", 
"1895X866CST22335", 
"1280X616CST2970", 
"1440X736CST10454", 
"1536X723CST7018", 
"1220X716C518X192T4989", 
"1920X937C676X211T35489", 
"1536X714C403X74T3814", 
"1536X746C688X212T25939", 
"1600X757C837X170T2078", 
"1366X657CST9034", 
"1920X937CST16885", 
"1436X990CST30494", 
"1366X625C680X178T2545", 
"1920X937CST9971", 
"1880X939C774X290T4664", 
"1024X657C375X218T9076", 
"980X1707CST12972", 
"2560X1321CST23209", 
"1154X618CST32121", 
"1280X885C511X219T23789", 
"1920X947C314X78T9120", 
"1680X939C629X335T26512", 
"1366X625C471X199T4321", 
"2560X937C903X224T6957", 
"1024X615C501X177T12031", 
"1366X657C1312X80-C492X338T323", 
"1094X474CST8814", 
"1366X625C524X172T35284", 
"1536X754C678X314T1874", 
"1366X657C518X223T16828", 
"1280X881C535X218-C451X347T24517", 
"980X1667C273X354T28232", 
"1600X757C828X165T18742", 
"1366X657C954X135T1538", 
"1364X625C469X80T13711", 
"1366X625C478X172T7085", 
"1366X568C555X197T2294", 
"980X1445CST69857", 
"1280X881C197X224T4928", 
"1198X581C594X228T9120", 
"1536X714CST10631", 
"1264X572C803X156T1837", 
"1536X778C698X233T2464", 
"1920X937C1020X345T30976", 
"1280X657C625X164T3006",
"1536X722C653X200-C562X305T6871", 
"1440X821C303X87-CST32297", 
"1366X657C491X228T18935", 
"1300X612CST32071", 
"1536X714C438X188T11855", 
"1366X625CST23622", 
"1366X657C536X216T7439", 
"1918X1129CST58309", 
"1280X657C503X88T2837", 
"1366X625C548X378T5063", 
"1440X856CST29969", 
"1280X657C633X178T3060", 
"1366X625CST118356", 
"1366X625C768X318T1453", 
"1366X625CST26866", 
"2048X878CST5622", 
"1348X604C1168X289T20658", 
"1700X811CST9074", 
"1280X881C346X223T13282", 
"1920X937C768X343T5051", 
"1366X657C674X123T8043", 
"1024X638CST11358", 
"974X435C922X292T28748", 
"1613X728CST26244", 
"1366X625CST34637", 
"1366X625C627X281-C495X218T57244", 
"1440X775C540X236-C531X355T18244", 
"1366X643CST24080", 
"1364X657CST11070", 
"1488X714C307X85T8607", 
"1366X625C482X222T16431", 
"980X1720C265X88T17409", 
"1280X881C849X202T1851", 
"1918X878C1026X330T1825", 
"1920X929CST33308", 
"1242X730CST21393", 
"1366X625CST41257", 
"1366X625C393X80T28284", 
"1920X937CST7735", 
"1269X702CST38017", 
"1536X825C374X214T8108", 
"1280X881C453X326T9528", 
"1920X1057CST14187", 
"1364X657C891X295-C487X310-C559X187T56830", 
"1366X625CST8594", 
"980X621C141X12-CST1660257136072", 
"1920X937C737X132T1571", 
"1680X925CST22474", 
"1680X907C652X217T36787", 
"1920X955C754X239-C1035X416T5935", 
"1366X625CST18659", 
"1600X757C840X168T2110", 
"1536X760CST4238", 
"1536X761C488X188T41704", 
"1536X722C709X283T5674", 
"1600X757C727X241T1415", 
"1366X625CST2558", 
"1366X625C503X72T16410", 
"2176X1037CST26766", 
"1536X746CST16420", 
"2560X1307C691X1288T11555", 
"1366X625C198X286T5908", 
"1440X710CST26459", 
"1360X657C496X41-CST41051", 
"1024X625C499X172T5414", 
"1366X617CST11708", 
"1280X881CST34591", 
"1920X927CST11431", 
"1418X664CST22428", 
"1346X610C464X343T7714", 
"1536X714C800X291T6197", 
"1280X881C194X429T3607", 
"1280X881C201X425T8015", 
"1536X723C573X195-CST58461", 
"1920X937C431X917T35711", 
"1366X657CST41205", 
"1920X937C1046X526T6438", 
"9890X1901C304X363T35634", 
"1366X625C639X164T1661", 
"1366X657C244X221T5442", 
"1920X969C305X83T3351", 
"1600X757CST5760", 
"1536X722CST2281", 
"A7RKQ3Y9C0PNN", 
"1873X961CST6083", 
"1280X657C630X170T72230", 
"1153X746CST22834", 
"1600X757C829X168T2302", 
"1430X851C849X229-C938X475T11518", 
"1366X657C164X284T5207",
"1280X609CST3089", 
"1440X821CST16031", 
"1390X721CST16028-CST34112", 
"1680X907C482X79T7278", 
"1440X789CST21701", 
"1366X657CST22272", 
"980X625CST16895", 
"1536X757CST16797", 
"1536X754C568X240-C665X204T6300", 
"1366X657CST14254", 
"1366X615C501X218-C530X222T29719", 
"1280X648CST36171", 
"1920X899CST10532", 
"1258X656C415X341T9304", 
"1366X649C974X114T7308", 
"1366X625CST32116", 
"1280X881C327X222T9879", 
"1366X625C692X252T1710", 
"1360X657C1078X636-CST31422", 
"1366X625C712X133T1558", 
"1280X818CST31158", 
"1366X617CST49902", 
"1366X649CST12372", 
"1366X625CST49050", 
"1600X789CST8426", 
"1280X657C693X308T2273", 
"1280X881CST10410", 
"1280X577CST23550", 
"1536X754C571X343T18698", 
"1094X472C812X237T7194", 
"1536X696CST7017", 
"1366X625CST3577", 
"1366X657C158X338-C1072X635T154139", 
"1366X625C734X131T2389", 
"1065X539CST31101", 
"730X672C185X220-C406X164-C187X223T11959", 
"1920X1057CST18900", 
"1366X625C1322X330T8759", 
"1280X657C307X86T3259", 
"1360X625C473X347T42759", 
"1366X617CST3906", 
"1366X625CST9831", 
"1321X806C469X343T11644", 
"1366X657C188X231-C549X274-C647X178-C486X304T17405", 
"1366X625CST31651", 
"1280X609C480X85T5450", 
"1280X721C275X199-C579X196-C528X186T11287", 
"1024X615C502X168T21312", 
"1366X625C395X75-C504X92-C663X86-C232X229-C186X286-C203X346-C231X514-C311X84-C640X177-C481X342-C807X167-C362X504-C263X503-C1075X602-CST76863-C141X603T83477", 
"1366X627C397X44T26077", 
"1920X969CST9085", 
"1022X1037C315X350T3412", 
"1920X969C996X419T9307", 
"1536X722CST6581", 
"1280X657C577X282T1180", 
"1680X899CST78071", 
"1366X657C700X135T2052", 
"1280X881CST8694", 
"1366X657C515X218-C586X225-C556X239-C629X279-C713X220-C320X222-C593X221-C476X341T101527", 
"1300X612CST5833", 
"1366X625C498X36T7553", 
"1366X625C675X162T5633", 
"1280X881C638X233T1925", 
"919X742C479X318T3001", 
"1366X617C490X226T13797", 
"1920X937C752X340T24596", 
"1536X792C308X225T8845", 
"1366X625C1034X149T2408", 
"1280X881C1231X77-C1235X27-CST25610", 
"817X647CST19128", 
"1536X746C1390X33-CST28818", 
"1263X671CST5488", 
"2048X1042CST7022", 
"1306X599CST1846", 
"1367X618C279X215T30300", 
"1344X582C461X233-C638X390-C1071X565T51511", 
"1280X881CST11462", 
"980X1837CST32520", 
"1093X462CST11954", 
"1350X607C796X86T3309", 
"1366X625C582X224T4388", 
"1088X867C484X334T775", 
"1920X912C1434X449T3923", 
"1440X731C529X341T31184", 
"1364X625CST12304", 
"1600X757C832X172T2542", 
"1792X1009C407X154T10089", 
"1920X937CST15893", 
"1219X618CST9165", 
"1366X625CST9165", 
"1745X852CST6122", 
"1536X721CST21220", 
"1600X928CST15048", 
"1366X625C979X104T5892", 
"1366X617C503X215T12374", 
"1366X600C760X324-CST10229", 
"1517X734C798X134-C307X234-C482X225-C248X291-C914X112T107825", 
"2560X1337CST6233", 
"1194X629C965X278-CST20997", 
"1974X846C303X385T3437", 
"1280X881C139X417T24324", 
"1536X746C588X314T17146", 
"1366X649CST13482", 
"1364X625C577X217T11273", 
"1920X969C1389X653T6150", 
"1366X625C909X195T5960", 
"1280X657C721X352T1706", 
"1408X642C714X408-CST33569-C718X351T45616", 
"1920X937C314X84T12767", 
"1280X609CST17357", 
"1008X640CST9007", 
"1366X625C577X183-C642X178T27497", 
"1920X872C500X81T7395", 
"1280X689C588X287T2615", 
"1016X625C509X172-CST43836", 
"1280X881CST15606", 
"1280X569CST13033", 
"1366X625C552X250T4996", 
"1280X881CST3509", 
"1264X572C626X241T1878", 
"1216X562CST8802", 
"1366X625C664X240T3768", 
"1280X881C636X537T5883", 
"1280X881CST5490", 
"1367X618C712X234T3632", 
"1600X757C835X176T2350", 
"1366X625C686X259T11943", 
"1366X657C494X352T2952", 
"1024X625C511X177T1972", 
"1920X937C764X345T4575", 
"1366X635CST7888", 
"1536X792C335X224T3488", 
"1366X657CST6495", 
"1920X937C936X219T3587", 
"1237X581CST15190", 
"1366X657C198X469-C469X49-C660X124-C620X50-C517X49-CST346961", 
"1280X881C582X348-C548X312-CST42499", 
"1366X649C819X313T5753", 
"1366X617CST6387", 
"1525X763CST14866", 
"1680X907C690X232T21539", 
"1366X625C670X173-C395X75-C663X169T71953", 
"1366X625CST9196", 
"1920X969CST6237", 
"1280X609CST12274", 
"1366X625C428X213T1583", 
"1242X568C647X260T6637", 
"1536X746CST15839", 
"1280X657C725X186T15052", 
"1364X657C409X87T6691", 
"1536X753C686X272T8417", 
"1536X714C1330X177T3635", 
"1366X657C444X323T1484", 
"1468X837C580X226T14119", 
"1366X625CST4307", 
"1920X969CST7280", 
"1366X625C706X194T3072", 
"1366X643CST31227", 
"1280X657C583X293T2731", 
"1920X929C760X345T7624", 
"1214X594CST57652", 
"1024X615C528X377T3770", 
"1366X657C509X225-CST118787-CST124546", 
"1366X625C611X228T11888", 
"1879X939C1510X567T8749", 
"1536X714C667X227T9194", 
"1366X625CST4725", 
"1536X714CST2701", 
"1920X955C439X292T39564", 
"1536X722CST7515", 
"1366X625CST7210", 
"1366X657CST27037", 
"1024X617C454X215T5944", 
"1280X881C621X310T1781", 
"1364X657C633X173T5624", 
"1600X757C830X168T2494", 
"1920X901C864X269T1975", 
"1920X937CST19872", 
"1366X625C501X336T4645", 
"1920X969CST22861", 
"1920X947C803X224T4164", 
"1920X927C917X615T9012", 
"1920X937C591X349T2333", 
"1366X657C1008X369T11764", 
"980X175C126X220T4700", 
"980X1711CST8185", 
"1366X625C512X222-C220X222-C573X230T30860", 
"1536X758CST3073", 
"1366X625C165X308-C159X312-C163X281-CST45119", 
"1470X840C309X86T4093", 
"1366X657C498X344T4043", 
"1366X657CST34469", 
"1112X697CST12686", 
"3440X1297C1674X284T4074", 
"1280X569CST12245", 
"1364X625C1321X61T7399", 
"1440X749CST32680", 
"980X1594CST7107", 
"1536X664CST6914", 
"1536X754CST13735", 
"1366X625CST20623", 
"1600X757C822X172T2550", 
"1280X899CST6198", 
"1280X609CST5802", 
"1366X625C671X169T5024", 
"848X369C359X147", 
"1366X658CST3598", 
"1906X941C459X221T3122", 
"1366X657C217X216-C267X445-C436X340-C516X86-CST27247-C236X529T31733", 
"1366X625C1341X523T4389", 
"1280X577C697X291-C437X345T17149", 
"1280X689CST21551", 
"1024X1235CST5403", 
"1536X722CST61275", 
"1366X625C597X223-C497X301T50386", 
"1366X635C675X127-C781X170T11780", 
"1920X929CST6105", 
"1920X919CST34928", 
"1680X907C780X274-C648X344-CST93740-C625X340-C800X425-C650X342T131788", 
"1280X601CST7776", 
"1339X636CST4230"
];

const processedData = rawData.map((raw) => {
  const time = raw.toLowerCase().split('t');
  const res = time[0].split('c')[0].split('x');
  const click = time[0].split('c')[1].split('x');

  const x = res[0];
  const y = res[1];

  const isSuccess = raw.includes("CST") && raw.split('-').length < 2;

  return {
    raw,
    // CST is present and where they tried more than once counts as a success
    isSuccess,
    res: {
      x,
      y
    },
    click: isSuccess ?
    null : {
      x: click[0] ? Math.round((100 * click[0].replace("-", "")) / x) + '%' : null,
      y: click[1] ? Math.round((100 * click[1].replace("-", "")) / y) + '%' : null
    },
    s: time[1] / 1000
  }
})
.filter((data) => data.isSuccess);

const average = processedData.map((data) => data.s)
  .reduce((a, b) => a + b) / processedData.length;

console.log(average);

const successfulData = processedData.filter((data) => data.isSuccess);
const successCount = successfulData.length;

const failureData = processedData.filter((data) => !successfulData.includes(data))
const failureCount = failureData.length;

processedData.forEach(data => {
  if (!data.click) return;
  var el = document.createElement("div");
  el.style.top = data.click.y;
  el.style.left = data.click.x;
  el.className = 'heatmap';
  document.body.appendChild(el);
});

console.log(processedData);
console.log('Total' + processedData.length, 'Successful' + successCount, 'Percent Correct' + Math.round((100 * successCount) / processedData.length) + '%', 'Failure Count' + failureCount);